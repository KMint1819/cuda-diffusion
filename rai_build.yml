rai:
  version: 0.2
  image: kmint1819/gten:rai4
resources:
  cpu:
    architecture: amd64
  gpu:
    count: 1
  network: false
  cache: false
commands:
  build:
    # These are for running the whole ControlNet model
    - /bin/sh -c 'cd /src/python/ && python3.8 -m pip install ./'
    - /bin/sh -c 'cd /src/ControlNet && python3.8 my_scribble2image.py'

    # These are for profiling the whole ControlNet model
    # - /bin/sh -c 'cd /src/python/ && python3.8 -m pip install ./'
    # - /bin/sh -c 'cd /src/ControlNet && nsys profile --stats=true -o analysis_file python3.8 my_scribble2image.py'
    # - /bin/sh -c 'cd /src/ControlNet && nv-nsight-cu-cli -o /build/analysis_file_nsight python3.8 my_scribble2image.py'
    # - /bin/sh -c 'cd /src/ControlNet && nv-nsight-cu-cli --section '.*' -o /build/analysis_file_nsight python3.8 my_scribble2image.py'
