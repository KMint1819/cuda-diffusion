rai:
  version: 0.2
  image: kmint1819/gten:rai4
resources:
  cpu:
    architecture: amd64
  gpu:
    count: 1
  network: false
  cache: false
commands:
  build:
    - /bin/sh -c 'cd /src/python/ && python3.8 -m pip install ./'
    # - /bin/sh -c 'cd /src/python/crossattn/ && python3.8 ensure_our.py'
    # - ls /usr/lib/python3.8/dist-packages
    # - /bin/sh -c 'python3.8 -c "import torch; import gten; gten.hello()"'
    - /bin/sh -c 'cd /src/ControlNet && python3.8 my_scribble2image.py'

    # Below is for C++ profiling
    # - cmake /src
    # - make
    # - nsys profile --stats=true -o analysis_file ./gten
    # - nv-nsight-cu-cli --section '.*' -o analysis_file python3.8 /src/python/forward_old_attention.py
    # - ./gten -a
